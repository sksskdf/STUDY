힙 공간은 RAM에 위치한 특별한 공간으로, 실행중인 어플리케이션이 객체를 생성하여 저장하는 공간입니다.
객체에 대한 참조를 저장하는 스택의 변수를 사용하기 때문에 
힙은 스택과 밀접하게 연관되어 있습니다.

다음 코드를 살펴 봅시다.
Object obj = new Object();

맨 왼쪽의 Object는 스택에 저장되어있는 선언된 변수입니다.
오른쪽에는 두가지 연산이 있습니다.
첫번째로 new 연산자는 객체를 위한 메모리공간을 동적으로 할당하고
객체는 스택의 적절한 변수에 생성된 후 참조됩니다.
그런 다음 생성자는 객체를 초기화 합니다.
즉 객체 필드에 초기 값을 할당합니다.

(동적 메모리 할당에 대해 말하면 개발자가 개체에 할당할 메모리의 
시기와 양에 대해 생각할 필요가 없다는 점을 이해하는 것이 중요합니다. 
이것은 응용 프로그램이 실행될 때 자동으로 수행됩니다.)

객체가 메모리 주소 0x001에 만들어 졌다고 가정해봅시다.

- 힙의 구조
힙 영역은 프로그램이 시작되면서 만들어집니다.
힙 내부에서는 자동으로 객체들이 만들어지고 삭제됩니다.
데이터들이 순차적으로 저장되는 스택과 달리
힙 내부의 객체는 단일 객체이거나 다른 객체를 참조할 수 있습니다.
객체는 항상 스택변수와 직접적으로 연결되지 않습니다.

자바 8버전 이전에는 힙공간은 영구생성이라고 불리는 개별적인 공간을 갖고 있었습니다.
영구생성이라는 공간에는 클래스의 메타데이터 등등 다양한 데이터가 저장되었습니다.
자바8부터는 메타스페이스라는 이름으로 바뀌었고
더 이상 힙이 가진 영역이 아니고 기존의 영구생성과는 달리 사이즈를 자동적으로 늘릴 수 있게 되었습니다.

- 힙 설정
자바나 코틀린에서의 메모리 관리는 자동적으로 수행됩니다.
하지만 HotSpot JVM은 힙 관리를 위한 설정을 제공합니다.

* -Xms 는 JVM시작 시 초기 힙사이즈를 설정합니다. (-Xms10m, -Xms10240k)
* -Xmx 는 최대 힙사이즈를 설정합니다. (-Xmx1g, -Xmx1024m)
* -XX:PermSize 는 영구생성기의 초기사이즈를 설정합니다. (-XX:PermSize=10m)
* -XX:MaxPermSize 는 영구생성기의 최대사이즈를 설정합니다 (-XX:MaxPermSize=1g)

힙의 최대사이즈의 제한을 주는것은 꽤 유용합니다.
OS상의 다른 프로레스들에 대한 메모리릭을 방지할 수 있습니다.

(메모리 릭은 잘못된 메모리 관리로부터 발생합니다. 
불필요한 객체가 삭제되지 않았다던가, 어떠한 이유로 도달할 수 없게 될 때를 말합니다.
이러한 상황에서는 응용 프로그램에 할당된 메모리가 더 빨리 소모됩니다.
힙이 메모리를 다 사용하면 새로운 객체를 할당할 메모리가 없으므로 어플리케이션은 
OutOfMemoryError를 던집니다.)



