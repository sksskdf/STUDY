- JVM이란?
물리적 컴퓨터에서 컴파일된 자바프로그램을 실행시켜주는 가상머신이다.
JVM은 운영체제 위에서 어플리케이션으로 실행되고 자바프로그램을 위한 환경을 제공한다.

가상머신을 사용하는 이유는 자바프로그램은 플랫폼 독립을 지향하고 그에따라 다른 운영체제와 다른 하드웨어에서도 실행가능해야하기 때문이다.

JVM구현체에는 다양한 종류가 있다.
HotSpot이 기본 구현이고,
오라클, Open JDK에서 사용한다.

다양한 JVM들(핫스팟포함)은 JVM Specification을 따라 구현됐다.

- JVM 내부 훑어보기
자바프로그램은 컴파일 후, class확장자의 파일이 생긴다.
class파일은 자바 바이트코드를 포함하고 있다.
코드를 실행하려면 JVM에 클래스파일을 로드해야 하고, JVM은 프로그램을 실행할 때 바이트 코드를 플랫폼 네이티브 코드로 변환한다.

JVM의 주요 수행기능은 다음과 같다.
1. 바이트코드를 로드한다.
2. 바이트코드를 확인한다.
3. 바이트코드를 실행한다.
4. 런타임환경을 제공한다.

- Class Loader(보조 시스템)
클래스 로더는 자바 바이트코드를 실행하기 위해 로드하고, 이를 확인한 다음 바이트 코드에 대한 메모리를 할당한다.
바이트코드확인은 bytecode verifier라고 부르는 모듈이 확인한다.

- Runtime data areas
JVM 메모리를 관리하는 서브시스템이다. 
각각의 서브시스템은 프로그램이 실행되는 동안 각각 다른 역할과 목적을 가지고 있다.
1. PC register는 현재 실행중인 명령어의 주소를 갖고 있다.
2. stack area는 메소드 호출과 지역변수가 저장되는 메모리 장소이다.
3. native method stack은 네이티브 메소드 정보를 갖고있다.
4. heap은 생성된 모든객체를 저장한다.
5. method area는 클래스이름, 부모클래스이름, 메서드정보와 모든 스태틱 변수들과 같은 클래스레벨의 정보를 저장한다.
모든 스레드는 각각 자신만의 pc regisgter, stack area, native method stack을 갖는다.
heap과 method area는 모든 스레드가 공유해서 사용한다.

- 실행 엔진
실행엔진은 프로그램실행에 대한 책임을 갖는다.
실행엔진은 JVM이 바이트코드를 실행할 때 JVM의 다양한 데이터 영역과 상호작용한다.

실행엔진의 구성
1. bytecode interpreter는 바이트코드를 한줄씩 해석하고 실행한다.
2. JIT compiler(just in time)는 바이트코드를 네이티브코드로 변환한다.
3. garbage collector는 heap으로부터 사용하지않는 객체들을 정리한다.

다른 JVM 구현은 바이트코드 인터프리터와 JIT 컴파일러를 모두 포함하거나 둘 중 하나만 포함할 수 있다.

- 인터페이스와 라이브러리
1. native method interface는 자바코드와 네이티브메소드 라이브러리 간의 인터페이스 역할을 한다.
2. native method library는 네이티브 코드 실행에 필요한 (C/C++) 파일로 구성되어 있다.